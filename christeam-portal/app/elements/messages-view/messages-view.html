<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-material/paper-material.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../../bower_components/plutonium-cm-form/plutonium-cm-form.html">

<dom-module id="messages-view">
    <template>
        <style>
            :host {
                display: block;
                /*@apply(--layout-vertical);*/
                @apply(--layout-horizontal);
                /*@apply(--layout-center);*/
            }
            :host paper-material {
                margin-left: 20px;
                background-color: white;
                @apply(--layout-vertical);
                /*@apply(--layout-center);*/
            }

            .card-content {
                @apply(--layout-horizontal);
                @apply(--layout-flex);
                /*@apply(--layout-center);*/
            }
            .section-content {
                display: inline-block;
                @apply(--layout-horizontal);
                @apply(--layout-flex);
                /*                @apply(--layout-center);*/
            }
            .section-actions {
                display: inline-block;
                @apply(--layout-vertical);
                @apply(--layout-center);
            }
        </style>
        <paper-card heading="New message">
            <plutonium-cm-form></plutonium-cm-form>
            
<!--            <div class="card-content">
                <paper-input label="To"></paper-input>
            </div>
            <div class="card-content">
                <paper-input label="Title"></paper-input>
            </div>
            <template is="dom-repeat" items="{{sections}}">
                <div id="content-section-{{item.index}}" class="card-content">
                    <paper-tabs selected="{{selected}}">
                        <paper-tab>
                            <paper-icon-button item-index$="{{item.index}}" on-click="editSection" icon="create" title="Edit this section."></paper-icon-button>
                        </paper-tab>
                        <paper-tab>
                            <paper-icon-button item-index$="{{item.index}}" on-click="removeSection" icon="remove-circle" title="Remove this section."></paper-icon-button>
                        </paper-tab>
                    </paper-tabs>

                    <iron-pages selected="{{selected}}"  class="section-content">
                        <div>
                            <template is="dom-if" if="{{isTextSection(item)}}">
                                <paper-textarea label="Text">
                                    {{item.value}}
                                </paper-textarea>
                            </template>
                            <template is="dom-if" if="{{isVideoSection(item)}}">
                                <google-youtube
                                    video-id$="{{item.value}}"
                                    rel="0"
                                    start="5"
                                    autoplay="0">
                            </google-youtube>
                        </template>
                        <template is="dom-if" if="{{isImageSection(item)}}">
                            <iron-image src$="{{item.value}}"></iron-image>
                        </template>
                    </div>
                    <div>
                        <template is="dom-if" if="{{isTextSection(item)}}">
                            <paper-textarea label="Text">
                                {{item.value}}
                            </paper-textarea>
                        </template>
                        <template is="dom-if" if="{{isVideoSection(item)}}">
                            <google-youtube
                                video-id$="{{item.value}}"
                                rel="0"
                                start="5"
                                autoplay="0">
                        </google-youtube>
                    </template>
                    <template is="dom-if" if="{{isImageSection(item)}}">
                        <iron-image src$="{{item.value}}"></iron-image>
                    </template>
                </div>
            </iron-pages>


        </div>
    </template>-->
</paper-card>
<paper-material elevation="1">
    <paper-icon-button on-click="addSection" icon="add-circle" title="Embedd video to the message content."></paper-icon-button>
    <paper-icon-button on-click="embedVideo" icon="theaters" title="Embedd video to the message content."></paper-icon-button>
    <paper-icon-button on-click="embedImage" icon="perm-media" title="Embedd image to the message content."></paper-icon-button>
    <paper-icon-button icon="supervisor-account" title="Choose users."></paper-icon-button>
    <paper-icon-button icon="send" title="Send message"></paper-icon-button>
</paper-material>
</template>
<script>
    (function () {
        'use strict';

        Polymer({
            is: 'messages-view',
            properties: {
                sections: {
                    type: Array,
                    value: [
                        {index: 0, type: 'text', value: 'Lorem ipsum.'},
                        {index: 1, type: 'video', value: 'z88XbRMR6H4'},
                        {index: 2, type: 'text', value: 'Lorem ipsum dloret aet apsi.'},
                        {index: 3, type: 'image', value: 'http://www.luluka.eoldal.hu/img/mid/43/cica-harc.jpg'}
                    ]
                },
                foo: {
                    type: String,
                    value: 'messages-view',
                    notify: true
                }
            },
            //                listeners: {
            //                    'addSection': 'addSection',
            //                    'embedVideo': 'embedVideo',
            //                    'embedImage': 'embedImage'
            //                }
            //                ,
            addSection: function () {
                console.log('Add new text-section.');
                this.push('sections', {index: this.sections.length, type: 'text', value: ''});
            },
            embedVideo: function () {
                console.log('Add new video-section.');
                this.push('sections', {index: this.sections.length, type: 'video', value: ''});
            },
            embedImage: function () {
                console.log('Add new image-section.');
                this.push('sections', {index: this.sections.length, type: 'image', value: ''});
            },
            editSection: function (e, a) {
                var index = e.currentTarget.getAttribute("item-index");
                console.log('Edit section [' + index + ']');
                this.splice('sections', index, 1);
            },
            removeSection: function (e, a) {
                var index = e.currentTarget.getAttribute("item-index");
                console.log('Remove section [' + index + ']');
                this.splice('sections', index, 1);
            },
            isVideoSection: function (item) {
                return (item.type === 'video');
            },
            isImageSection: function (item) {
                return (item.type === 'image');
            },
            isTextSection: function (item) {
                return (item.type === 'text');
            }
        });
    })();
</script>
</dom-module>
